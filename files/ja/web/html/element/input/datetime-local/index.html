---
title: <input type="datetime-local">
slug: Web/HTML/Element/input/datetime-local
tags:
  - Date
  - Date and Time
  - Element
  - Form input
  - HTML
  - HTML forms
  - Input
  - Input Element
  - Input Type
  - Reference
  - Time
  - datetime-local
translation_of: Web/HTML/Element/input/datetime-local
---
<div>{{HTMLRef("Input_types")}}</div>

<p><span class="seoSummary">{{HTMLElement("input")}} 要素の <strong><code>datetime-local</code></strong> 型は、ユーザーが簡単に日付と時刻、つまり年、月、日と時、分を入力することができる入力コントロールを生成します。ユーザーのローカルタイムゾーンが使用されます。</span></p>

<div>{{EmbedInteractiveExample("pages/tabbed/input-datetime-local.html", "tabbed-shorter")}}</div>

<div class="hidden">このデモのソースファイルは GitHub リポジトリに格納されています。デモプロジェクトに協力したい場合は、 <a href="https://github.com/mdn/interactive-examples">https://github.com/mdn/interactive-examples</a> をクローンしてプルリクエストを送信してください。</div>

<p>コントロールのユーザーインターフェイスは、一般にブラウザーによってまちまちです。現時点で対応は不安定で、 Chrome/Opera とデスクトップ版の Edge、それに最新版のモバイルブラウザーが有用な実装をしています。他のブラウザーでは、このコントロールは単純な <code><a href="/ja/docs/Web/HTML/Element/input/text">&lt;input type="text"&gt;</a></code> に格下げされます。</p>

<p>このコントロールは単純に<em>ローカルの日付と時刻</em>を表現するためのものであって、<em>ユーザーのローカルの日付と時刻</em>を示すとは限りません。言い換えれば、実装では有効な年、月、日、時、分をすべて、仮にその組み合わせがユーザーのタイムゾーンで無効であったとしても (春の夏時間への移行ギャップなど)、許可するべきです。一部のモバイルブラウザーは (特に iOS のものは) これを正しく実装していません。</p>

<p><code>datetime-local</code> は限られたブラウザーしか対応しておらず、入力欄の動作が様々であるため、現在はこれを表示するためにフレームワークやライブラリを使用するか、独自のカスタム入力欄をした方が良いかもしれません。また、 <code>date</code> と <code>time</code> の入力欄を別々に使用すると、 <code>datetime-local</code> よりも対応が広くなります。</p>

<p>一部のブラウザーでは、テキストのみの入力要素を表示し、結果をサーバーに送信する前に妥当な日付/時刻値であることを検証するものもありますが、予期しない動作をすることがあるので、この動作に頼るべきではありません。</p>

<p>対応していないブラウザーを使っている人向けに、 Chrome や Opera の <code>datetime-local</code> コントロールは以下のスクリーンショットのようになります。右端の下向きの矢印をクリックすると、日付を選択するための日付選択画面が現れます。時刻は手入力する必要があります。</p>

<p><img alt="" src="https://mdn.mozillademos.org/files/14949/datetime-local-chrome.png" style="display: block; height: 224px; margin: 0px auto; width: 280px;"></p>

<p>Edge の <code>datetime-local</code> コントロールは以下のような外見です。日付および時刻のぶぶんの値をクリックすると、2つの別々な選択画面が現れますので、簡単に日付と時刻を設定できます。これは <code>date</code> と <code>time</code> のウィジェットを両方作成して、一つにまとめたようなものです。</p>

<p><img alt="" src="https://mdn.mozillademos.org/files/14953/datetime-local-picker-edge1.png" style="display: block; height: 398px; margin: 0px auto; width: 320px;"></p>

<p><img alt="" src="https://mdn.mozillademos.org/files/14955/datetime-local-picker-edge2.png" style="display: block; height: 394px; margin: 0px auto; width: 264px;"></p>

<table class="properties">
 <tbody>
  <tr>
   <td><strong>{{anch("Value", "値")}}</strong></td>
   <td>(ローカルタイムゾーンでの) 日付と時刻を表す {{domxref("DOMString")}}、または空欄。</td>
  </tr>
  <tr>
   <td><strong>イベント</strong></td>
   <td>{{domxref("HTMLElement/change_event", "change")}} および {{domxref("HTMLElement/input_event", "input")}}</td>
  </tr>
  <tr>
   <td><strong>対応している共通属性</strong></td>
   <td>{{htmlattrxref("autocomplete", "input")}}, {{htmlattrxref("list", "input")}}, {{htmlattrxref("readonly", "input")}}, {{htmlattrxref("step", "input")}}</td>
  </tr>
  <tr>
   <td><strong>IDL 属性</strong></td>
   <td><code>list</code>, <code>value</code>, <code>valueAsNumber</code></td>
  </tr>
  <tr>
   <td><strong>メソッド</strong></td>
   <td>{{domxref("HTMLInputElement.select", "select()")}}, {{domxref("HTMLInputElement.stepDown", "stepDown()")}}, {{domxref("HTMLInputElement.stepUp", "stepUp()")}}</td>
  </tr>
 </tbody>
</table>

<h2 id="Value" name="Value">値</h2>

<p>入力欄に入力された日付の値を表す {{domxref("DOMString")}} です。この入力型で使われる日付と時刻の値の形式は、<a href="/ja/docs/Web/HTML/Date_and_time_formats#Local_date_and_time_strings">ローカル日時の文字列</a>で説明されています。</p>

<p>次のように、 {{htmlattrxref("value", "input")}} 属性に日付と時刻を入れることで、入力欄の既定値を設定することができます。</p>

<pre class="brush: html notranslate">&lt;label for="party"&gt;パーティーを予約する日時を入力してください。&lt;/label&gt;
&lt;input id="party" type="datetime-local" name="partydate" value="2017-06-01T08:30"&gt;</pre>

<p>{{EmbedLiveSample('Value', 600, 60)}}</p>

<p>一点気を付けなければならないことは、表示される日付と時刻の書式は実際の <code>value</code> とは異なることです。表示される日付と時刻は、オペレーティングシステムからの報告に従ってユーザーのロケールによって書式化されますが、日付や時刻の <code>value</code> は常に <code>yyyy-MM-ddThh:mm</code> の書式です。例えば、上記の値をサーバーに送信すると、 <code>partydate=2017-06-01T08:30</code> のようになります。</p>

<div class="note">
<p><strong>注:</strong> このようなデータが HTTP の <code><a href="/ja/docs/Web/HTTP/Methods/GET">GET</a></code> を通じて送信されると、コロン文字を URL 引数に含めるために、 <code>partydate=2017-06-01T08%3A30</code> のようにエスケープする必要があることもお忘れなく。これを行う方法の一つとして {{jsxref("Global_Objects/encodeURI", "encodeURI()")}} を参照してください。</p>
</div>

<p>次のように、 JavaScript で {{domxref("HTMLInputElement.value")}} プロパティを使用して日付の値を取得したり設定したりすることもできます。</p>

<pre class="brush: js notranslate">var dateControl = document.querySelector('input[type="datetime-local"]');
dateControl.value = '2017-06-01T08:30';</pre>

<p>JavaScript の {{jsxref("Date")}} には、数値の日時情報を正しく整形された文字列に変換したり、手動で行ったりするメソッドがいくつかあります。例えば、この用途では {{jsxref("Date.toISOString()")}} メソッドが利用できます。</p>

<h2 id="Additional_attributes" name="Additional_attributes">追加の属性</h2>

<p>すべての {{HTMLElement("input")}} 要素で共通する属性に加え、 <code>datetime-local</code> 型の入力欄は次の属性にも対応しています。</p>

<table class="standard-table">
 <thead>
  <tr>
   <th scope="col">属性</th>
   <th scope="col">説明</th>
  </tr>
 </thead>
 <tbody>
  <tr>
   <td><code>{{anch("max")}}</code></td>
   <td>受け付ける最新の日時</td>
  </tr>
  <tr>
   <td><code>{{anch("min")}}</code></td>
   <td>受け付ける最古の日時</td>
  </tr>
  <tr>
   <td><code>{{anch("step")}}</code></td>
   <td>上下の矢印で値を調整する時や、検証を行う時に使用する刻み値</td>
  </tr>
 </tbody>
</table>

<h3 id="htmlattrdefmax">{{htmlattrdef("max")}}</h3>

<p>受け付ける最新の日時です。要素に入力された {{htmlattrxref("value", "input")}} がこのタイムスタンプよりも後の場合、要素は<a href="/ja/docs/Web/Guide/HTML/HTML5/Constraint_validation">制約検証</a>に失敗します。 <code>max</code> 属性の値が <code>yyyy-MM-ddThh:mm</code> の書式に従う妥当な文字列でない場合、要素は最大値を持ちません。</p>

<p>この値は <code>min</code> 属性で指定されたものより後か、同じ日付を指定する必要があります。</p>

<h3 id="htmlattrdefmin">{{htmlattrdef("min")}}</h3>

<p>受け付ける最古の日時です。これより前のタイムスタンプの場合、要素は<a href="/ja/docs/Web/Guide/HTML/HTML5/Constraint_validation">制約検証</a>に失敗します。 <code>min</code> 属性の値が <code>yyyy-MM-ddThh:mm</code> の書式に従う妥当な文字列でない場合、要素は最小値を持ちません。</p>

<p>この値は <code>max</code> 属性で指定されたものより前か、同じ日付を指定する必要があります。</p>

<h3 id="htmlattrdefstep">{{htmlattrdef("step")}}</h3>

<p>{{page("/en-US/docs/Web/HTML/Element/input/number", "step-include")}}</p>

<p><code>datetime-local</code> 入力欄では、 <code>step</code> の値は秒数で指定され、 1000 が乗じられます (ミリ秒単位の数値であるため)。 <code>step</code> の既定値は 60 であり、60秒 (1分、60000ミリ秒) を表します。</p>

<p><em>現時点で、 <code>datetime-local</code> 入力欄で <code>step</code> に <code>any</code> の値が何を意味するかが不明確です。これは情報が決定次第、更新されるでしょう。</em></p>

<h2 id="datetime-local_入力の使用">datetime-local 入力の使用</h2>

<p>datetime-local 入力欄は一見すると便利に見えます。簡単に日付と時刻を選択するユーザーインターフェイスを提供し、ユーザーのロケールに関係なく、データ形式を正規化してサーバーに送信するからです。しかし、ブラウザーの互換性が限られているため、 <code>&lt;input type="datetime-local"&gt;</code> には問題があります。</p>

<p><code>&lt;input type="datetime-local"&gt;</code> の基本的な使い方と少し複雑な使い方を見てみてから、その後でブラウザーの互換性の問題を緩和するアドバイスを提供しましょう ({{anch("Handling browser support", "ブラウザーの対応の扱い")}}を参照してください)。</p>

<h3 id="datetime-local_の基本的な使用">datetime-local の基本的な使用</h3>

<p>もっとも単純な <code>&lt;input type="datetime-local"&gt;</code> の使用方法は、次のような基本的な <code>&lt;input&gt;</code> と {{htmlelement("label")}} 要素の組み合わせです。</p>

<pre class="brush: html notranslate">&lt;form&gt;
    &lt;label for="party"&gt;パーティーを予約する日時を入力してください。&lt;/label&gt;
    &lt;input id="party" type="datetime-local" name="partydate"&gt;
&lt;/form&gt;</pre>

<p>{{EmbedLiveSample('Basic_uses_of_datetime-local', 600, 40)}}</p>

<h3 id="Setting_maximum_and_minimum_dates_and_times" name="Setting_maximum_and_minimum_dates_and_times">日時の最大値と最小値の設定</h3>

<p>{{htmlattrxref("min", "input")}} および {{htmlattrxref("max", "input")}} 属性を使用して、ユーザーが選択できる日時を制限することができます。次の例では、日時の最小値を <code>2017-06-01T08:30</code> に、日時の最大値を <code>2017-06-30T16:30</code> に設定しています。</p>

<pre class="brush: html notranslate">  &lt;form&gt;
    &lt;label for="party"&gt;パーティーを予約する日時を入力してください。&lt;/label&gt;
    &lt;input id="party" type="datetime-local" name="partydate" min="2017-06-01T08:30" max="2017-06-30T16:30"&gt;
  &lt;/form&gt;</pre>

<p>{{EmbedLiveSample('Setting_maximum_and_minimum_dates_and_times', 600, 40)}}</p>

<p>結果は次のようになります。</p>

<ul>
 <li>この結果は、2017年の6月の日付のみが選択できるようになります。文字列値の「日」の部分のみが編集可能となり、日付選択ウィジェットで6月以外にスクロールすることはできなくなります。</li>
 <li>どのブラウザーを使用するかによって、指定された値の範囲外の時刻が時刻選択画面で選択できなかったり (Edge など)、無効な値 ({{anch("Validation")}} を参照) であっても設定できたりすることがあります (Chrome など)。</li>
</ul>

<div class="note">
<p><strong>注</strong>: {{htmlattrxref("step", "input")}} 属性を使用すると、日時を加算するたびに飛ばす日時を設定できるはずです (例えば、土曜日のみを選択できるようにしたい場合など)。しかし、執筆時点でどの実装も正しく動作していないようです。</p>
</div>

<h3 id="Controlling_input_size" name="Controlling_input_size">入力欄の寸法の制御</h3>

<p><code>&lt;input type="datetime-local"&gt;</code> は、 {{htmlattrxref("size", "input")}} のようなコントロールの寸法に関する属性には対応していません。寸法を変更する必要がある場合は、 <a href="/ja/docs/Web/CSS">CSS</a> を使用する必要があります。</p>

<h3 id="Setting_timezones" name="Setting_timezones">タイムゾーンの設定</h3>

<p><code>datetime-local</code> 入力型はコントロールのタイムゾーンやロケールを設定する方法がありません。これは <code><a href="/ja/docs/Web/HTML/Element/input/datetime">datetime</a></code> 入力型では利用できましたが、この入力型は廃止され、仕様書から削除されました。削除された主な理由はブラウザーの互換性がなく、ユーザーインターフェイスや使い勝手が決まっていなかったからです。単に日付と時刻を設定するコントロールを用意して、別なコントロールで地域を設定したほうが簡単です。</p>

<p>例えば、ユーザーがログインしている場所によって地域を設定するようなシステムを開発する場合、タイムゾーンを <code><a href="/ja/docs/Web/HTML/Element/input/hidden">hidden</a></code> 入力型で次のように提供することができます。</p>

<pre class="brush: html notranslate">&lt;input type="hidden" id="timezone" name="timezone" value="-08:00"&gt;</pre>

<p>一方、ユーザーに日時入力と共にタイムゾーンを入力できるようにする必要がある場合、 {{htmlelement("select")}} 要素などでタイムゾーンを入力する手段を提供することができます。</p>

<pre class="brush: html notranslate">&lt;select name="timezone_offset" id="timezone-offset" class="span5"&gt;
    &lt;option value="-12:00"&gt;(GMT -12:00) Eniwetok, Kwajalein&lt;/option&gt;
    &lt;option value="-11:00"&gt;(GMT -11:00) Midway Island, Samoa&lt;/option&gt;
    &lt;option value="-10:00"&gt;(GMT -10:00) Hawaii&lt;/option&gt;
    &lt;option value="-09:50"&gt;(GMT -9:30) Taiohae&lt;/option&gt;
    &lt;option value="-09:00"&gt;(GMT -9:00) Alaska&lt;/option&gt;
    &lt;option value="-08:00"&gt;(GMT -8:00) Pacific Time (US &amp;amp; Canada)&lt;/option&gt;

  ...

&lt;/select&gt;</pre>

<p>どちらの場合も、日時の値とタイムゾーンの値はサーバーに別々のデータポイントとして送信されるため、サーバー側のデータベースに適切に格納する必要があります。</p>

<div class="note">
<p><strong>注</strong>: 上記のコードの断片は、<a href="https://gist.github.com/nodesocket/3919205">HTML select 要素の全世界のタイムゾーン</a>から取得しました。</p>
</div>

<h2 id="Validation" name="Validation">検証</h2>

<p>既定では、 <code>&lt;input type="datetime-local"&gt;</code> は入力された値の検証を行いません。ユーザーインターフェイスの実装は一般的に、日付でないものの入力をさせないからです。これは便利です。しかし、それでも入力欄を空のままにしたり、 (<code>text</code> 型にフォールバックするブラウザーにおいて) 無効な日付 (例えば4月32日など) を入力したりすることが可能です。</p>

<p>{{htmlattrxref("min", "input")}} および {{htmlattrxref("max", "input")}} を使用して有効な日付を制限したり ({{anch("Setting maximum and minimum dates", "日付の最大値と最小値の設定")}}を参照)、 {{htmlattrxref("required", "input")}} 属性を使用して日時の入力を必須にしたりすることができます。その結果、対応しているブラウザーでは、範囲を外れた日付や空の日付欄を送信しようとするとエラーが表示されるでしょう。</p>

<p>例を見てみましょう。ここで日付の最小値と最大値を設定し、入力欄を必須にしました。</p>

<pre class="brush: html notranslate">&lt;form&gt;
    &lt;div&gt;
        &lt;label for="party"&gt;希望するパーティーの日時を選択して下さい (必須、6月1日午前8:30～6月30日午後4:30) &lt;/label&gt;
        &lt;input id="party" type="datetime-local" name="partydate" min="2017-06-01T08:30" max="2017-06-30T16:30" required&gt;
        &lt;span class="validity"&gt;&lt;/span&gt;
    &lt;/div&gt;
    &lt;div&gt;
        &lt;input type="submit" value="予約する！"&gt;
    &lt;/div&gt;
&lt;/form&gt;</pre>

<p>不完全な日付 (または設定した範囲を外れた日付) を送信しようとすると、ブラウザーはエラーを表示します。例を実行してみましょう。</p>

<p>{{ EmbedLiveSample('Validation', 600, 120) }}</p>

<p>対応しているブラウザーで入力しなかった場合のスクリーンショットです。</p>

<p><img alt="" src="https://mdn.mozillademos.org/files/14957/datetime-local-error.png" style="display: block; height: 100px; margin: 0px auto; width: 558px;"></p>

<p>上記の例の CSS です。 CSS の {{cssxref(":valid")}} および {{cssxref(":invalid")}} プロパティを使用して、現在の値が有効かどうかに基づいてスタイルを設定しています。アイコンは入力欄そのものではなく、入力欄の隣の {{htmlelement("span")}} に置くようにしないと、 Chrome ではコントロールの内側にコンテンツを生成するので、正しく整形したり表示したりすることができません。</p>

<pre class="brush: css notranslate">div {
    margin-bottom: 10px;
    display: flex;
    align-items: center;
}

label {
  display: inline-block;
  width: 300px;
}

input:invalid+span:after {
    content: '✖';
    padding-left: 5px;
}

input:valid+span:after {
    content: '✓';
    padding-left: 5px;
}</pre>

<div class="warning">
<p><strong>重要</strong>: HTML のフォーム検証は、入力されたデータが正しい形式であることを保証するスクリプトの代用にはなりません。 HTML を調整して検証をくぐり抜けたり、完全に削除したりすることはとても簡単にできます。 HTML を完全にバイパスし、サーバーに直接データを送信することも可能です。サーバー側のコードが受信したデータの検証に失敗した場合、不適切な形式のデータ (または大きすぎるデータ、誤った種類のデータなど) が送信された場合に障害が発生するおそれがあります。</p>
</div>

<h2 id="Handling_browser_support" name="Handling_browser_support">ブラウザーの対応の扱い</h2>

<p>前述のように、現時点で日付入力を書く上で一番の問題は{{anch("Browser compatibility", "ブラウザーの互換性")}}です。デスクトップでは Chrome/Opera と Edge のみが対応しており、モバイルでは多くの最新のブラウザーが対応しています。例えば、 Android 版 Firefox の <code>datetime-local</code> の選択画面はこの例のように表示されます。</p>

<p><img alt="" src="https://mdn.mozillademos.org/files/14951/datetime-local-fxa.png" style="display: block; height: 640px; margin: 0px auto; width: 360px;"></p>

<p>対応していないブラウザーでは、文字列入力欄に安全に格下げされますが、これはユーザーインターフェイスの一貫性 (表示されるコントロールが異なること) とデータの扱いの両方で問題を生みます。</p>

<p>2番目の問題はより深刻です。すでに述べたように、 <code>datetime-local</code> 入力欄では、実際の値が常に <code>yyyy-mm-ddThh:mm</code> の書式で正規化されます。一方、文字列入力欄では、既定でブラウザーは日付がどの書式で入力されるかの認識がなく、以下のように人間が日付と時刻を書く様々な方法で入力される可能性があります。</p>

<ul>
 <li><code>ddmmyyyy</code></li>
 <li><code>dd/mm/yyyy</code></li>
 <li><code>mm/dd/yyyy</code></li>
 <li><code>dd-mm-yyyy</code></li>
 <li><code>mm-dd-yyyy</code></li>
 <li><code>mm-dd-yyyy hh:mm</code> (12時制)</li>
 <li><code>mm-dd-yyyy HH:mm</code> (24時制)</li>
 <li>など</li>
</ul>

<p>これを回避する方法の一つは、日付入力欄に {{htmlattrxref("pattern", "input")}} 属性を付けることです。日付入力欄はこれを使用しないので、 <code>text</code> 入力欄にフォールバックされたときは使用します。例えば、次の例を未対応のブラウザーで見てみてください。</p>

<pre class="brush: html notranslate">&lt;form&gt;
  &lt;div&gt;
    &lt;label for="party"&gt;希望するパーティーの日時を選択して下さい (必須、6月1日午前8:30～6月30日午後4:30) &lt;/label&gt;
    &lt;input id="party" type="datetime-local" name="partydate"
           min="2017-06-01T08:30" max="2017-06-30T16:30"
           pattern="[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}" required&gt;
    &lt;span class="validity"&gt;&lt;/span&gt;
  &lt;/div&gt;
  &lt;div&gt;
    &lt;input type="submit" value="予約する！"&gt;
  &lt;/div&gt;
  &lt;input type="hidden" id="timezone" name="timezone" value="-08:00"&gt;
&lt;/form&gt;</pre>

<p>{{EmbedLiveSample('Handling_browser_support', 600, 100)}}</p>

<p><code>nnnn-nn-nnTnn:nn</code> のパターン (<code>n</code> は数字の0から9) に一致しない文字列を入力して送信しようとすると、エラーメッセージが表示される (そして入力欄が無効として強調表示される) のが分かるでしょう。もちろん、これではユーザーが無効な日付を入力したり、誤った形式で日付や時刻を入力したりすることを止めることはできません。</p>

<p>また、日付や時刻を入力するパターンをどうやってユーザーに理解させればよいのでしょうか？</p>

<p>まだ問題があります。</p>

<div class="hidden">
<pre class="brush: css notranslate">div {
  margin-bottom: 10px;
}

input:invalid + span {
  position: relative;
}

input:invalid + span:after {
  content: '✖';
  position: absolute;
  right: -18px;
}

input:valid + span {
  position: relative;
}

input:valid + span:after {
  content: '✓';
  position: absolute;
  right: -18px;
}</pre>
</div>

<p>ブラウザーに依存しない方法によってフォームで日付を扱う最善の方法は、現時点では年月日を別々なコントロール ({{htmlelement("select")}} 要素が一般的です。以下の実装を見てください) にするか、 <a href="https://jqueryui.com/datepicker/">jQuery date picker</a> や <a href="http://timepicker.co/">jQuery timepicker plugin</a> のような JavaScript ライブラリを使用することです。</p>

<h2 id="2038年問題_主にサーバー側">2038年問題 (主にサーバー側)</h2>

<p>JavaScript は日付を格納するとき、すべての数値と同様に、倍精度浮動小数点を使用しますので、 JavaScript のコードは整数への変換やビット操作が行われない限り、2038年問題に悩まされることはありません。ビット操作演算は、32ビットの符号付き2の補数で演算を行っているので影響を受ける可能性があります。</p>

<p>問題はサーバー側で、 2<sup>31</sup>-1 よりも大きな日付値を格納する場合です。この問題を解決するには、すべての日付を符号なしの32ビット整数、符号付きの64ビット整数、または倍精度の浮動小数点のいずれかでサーバーに格納する必要があります。サーバーが PHP で書かれている場合は、PHP 8 または 7 にアップグレードし、ハードウェアを x86_64 または IA64 にアップグレードするだけで解決できるかもしれません。他のハードウェアで行き詰っている場合は、32ビット仮想マシン内で64ビットハードウェアをエミュレートすることもできますが、ほとんどの仮想マシンはこの種の仮想化をサポートしていないため、安定性が損なわれ、性能が大きく低下する可能性があります。</p>

<h2 id="The_Y10k_Problem_often_client-side" name="The_Y10k_Problem_often_client-side">10000年問題 (主にクライアント側)</h2>

<p>多くのサーバーでは、日付を文字列ではなく数値として保存します。10000年以降は、これらの数字は以前よりも少し大きくなるだけなので、多くのサーバーでは10000年以降をフォームで送信しても問題が発生することはありません。</p>

<p>問題はクライアント側の問題です。年に4桁以上の数字を持つ日付の解析です。</p>

<pre class="brush: html notranslate">&lt;!--midnight of January 1st, 10000: the exact time of Y10K--&gt;
&lt;input type="datetime-local" value="+010000-01-01T05:00"/&gt;</pre>

<p>単純なことです。何桁でもいいコードを用意するだけです。5桁の数字だけを用意するのではありません。プログラムで値を設定するための JavaScript のコードを紹介します。</p>

<pre class="brush: js notranslate">function setValue(element, date) {
    var isoString = date.toISOString()
    element.value = isoString.substring(0, (isoString.indexOf("T")|0) + 6|0);
}</pre>

<p>もしこれがあなたの死後何世紀も経ってから起こるのであれば、なぜ10000年問題を心配するのかでしょうか。その通り、あなたはすでに死んでいるので、あなたのソフトウェアを使っている企業は、システムを十分に知っている他のコーダーが入ってきてそれを修正することなく、あなたのソフトウェアを使うと行き詰まってしまうからです。</p>

<h2 id="Examples" name="Examples">例</h2>

<p>この例では、日付を選択するユーザーインターフェイスの要素を2組生成します。ネイティブの <code>&lt;input type="datetime-local"&gt;</code> 入力欄と、ネイティブの入力に対応しない古いブラウザー向けの、5つの {{htmlelement("select")}} 要素による日時選択です。</p>

<p>{{EmbedLiveSample('Examples', 600, 140)}}</p>

<p>HTML は次のようになります。</p>

<pre class="brush: html notranslate">&lt;form&gt;
  &lt;div class="nativeDateTimePicker"&gt;
    &lt;label for="party"&gt;希望するパーティーの日時を選択して下さい。&lt;/label&gt;
    &lt;input type="datetime-local" id="party" name="bday"&gt;
    &lt;span class="validity"&gt;&lt;/span&gt;
  &lt;/div&gt;
  &lt;p class="fallbackLabel"&gt;希望するパーティーの日時を選択して下さい。&lt;/p&gt;
  &lt;div class="fallbackDateTimePicker"&gt;
    &lt;div&gt;
      &lt;span&gt;
        &lt;select id="year" name="year"&gt;
        &lt;/select&gt;
        &lt;label for="year"&gt;年&lt;/label&gt;
      &lt;/span&gt;
      &lt;span&gt;
        &lt;select id="month" name="month"&gt;
          &lt;option selected&gt;1&lt;/option&gt;
          &lt;option&gt;2&lt;/option&gt;
          &lt;option&gt;3&lt;/option&gt;
          &lt;option&gt;4&lt;/option&gt;
          &lt;option&gt;5&lt;/option&gt;
          &lt;option&gt;6&lt;/option&gt;
          &lt;option&gt;7&lt;/option&gt;
          &lt;option&gt;8&lt;/option&gt;
          &lt;option&gt;9&lt;/option&gt;
          &lt;option&gt;10&lt;/option&gt;
          &lt;option&gt;11&lt;/option&gt;
          &lt;option&gt;12&lt;/option&gt;
        &lt;/select&gt;
        &lt;label for="month"&gt;月&lt;/label&gt;
      &lt;/span&gt;
      &lt;span&gt;
        &lt;select id="day" name="day"&gt;
        &lt;/select&gt;
        &lt;label for="day"&gt;日&lt;/label&gt;
      &lt;/span&gt;
    &lt;/div&gt;
    &lt;div&gt;
      &lt;span&gt;
        &lt;select id="hour" name="hour"&gt;
        &lt;label for="hour"&gt;時&lt;/label&gt;
        &lt;/select&gt;
      &lt;/span&gt;
      &lt;span&gt;
        &lt;select id="minute" name="minute"&gt;
        &lt;label for="minute"&gt;分&lt;/label&gt;
        &lt;/select&gt;
      &lt;/span&gt;
    &lt;/div&gt;
  &lt;/div&gt;
&lt;/form&gt;</pre>

<p>月は (常に同じなので) ハードコーディングされていますが、年と日の値は、現在の年、および現在選択されている年と月によってそれぞれ動的に生成されます (どのように動作するかについての詳細な説明は、以下のコードのコメントを参照してください)。時と分についても、とても多いので動的に生成するようにしました。</p>

<div class="hidden">
<pre class="brush: css notranslate">div {
  margin-bottom: 10px;
  position: relative;
}

input[type="number"] {
  width: 100px;
}

input + span {
  padding-right: 30px;
}

input:invalid+span:after {
  position: absolute;
  content: '✖';
  padding-left: 5px;
}

input:valid+span:after {
  position: absolute;
  content: '✓';
  padding-left: 5px;
}</pre>
</div>

<p>もう一つの面白い部分は、機能の検出コードです。ブラウザーが <code>&lt;input type="datetime-local"&gt;</code> に対応しているかどうかを検出するために、新たな {{htmlelement("input")}} 要素を生成し、その <code>type</code> を <code>datetime-local</code> に設定してみて、すぐに type に何が設定されたかをチェックします。 <code>datetime-local</code> 型に対応していないブラウザーでは、 <code>datetime-local</code> 型が <code>text</code> 型へフォールバックされます。 <code>&lt;input type="datetime-local"&gt;</code> に対応していない場合は、ネイティブの日時入力欄を非表示にしてフォールバック用の ({{htmlelement("select")}}) による選択ユーザーインターフェイスを表示します。</p>

<pre class="brush: js notranslate">// 変数を定義
var nativePicker = document.querySelector('.nativeDateTimePicker');
var fallbackPicker = document.querySelector('.fallbackDateTimePicker');
var fallbackLabel = document.querySelector('.fallbackLabel');

var yearSelect = document.querySelector('#year');
var monthSelect = document.querySelector('#month');
var daySelect = document.querySelector('#day');
var hourSelect = document.querySelector('#hour');
var minuteSelect = document.querySelector('#minute');

// 最初はフォールバックを非表示にする
fallbackPicker.style.display = 'none';
fallbackLabel.style.display = 'none';

// 新しい日付入力が文字列入力にフォールバックされるかどうか
var test = document.createElement('input');

try {
  test.type = 'datetime-local';
} catch (e) {
  console.log(e.description);
}

// もし文字列入力になるならば、 if() {} ブロックの中のコードを実行する
if(test.type === 'text') {
  // ネイティブの日付選択を隠してフォールバック版を表示
  nativePicker.style.display = 'none';
  fallbackPicker.style.display = 'block';
  fallbackLabel.style.display = 'block';

  // 日と年を動的に生成する
  //  (月は常に同じなのでハードコーディング)
  populateDays(monthSelect.value);
  populateYears();
  populateHours();
  populateMinutes();
}

function populateDays(month) {
  // 日の &lt;select&gt; から現在の一連の &lt;option&gt; 要素を削除し、
  // 挿入のための準備をする
  while(daySelect.firstChild){
    daySelect.removeChild(daySelect.firstChild);
  }

  // 挿入する日数を保持する変数を作成
  var dayNum;

  // 31 か 30 日か
  if(month === '1' || month === '3' || month === '5' || month === '7' || month === '8' || month === '10' || month === '12') {
    dayNum = 31;
  } else if(month === '4' || month === '6' || month === '9' || month === '11') {
    dayNum = 30;
  } else {
  // 2月の場合は、閏年かどうかを計算する
    var year = yearSelect.value;
    var isLeap = new Date(year, 1, 29).getMonth() == 1;
    isLeap ? dayNum = 29 : dayNum = 28;
  }

  // 日付の &lt;select&gt; に正しい数の新しい &lt;option&gt; 要素を
  for(i = 1; i &lt;= dayNum; i++) {
    var option = document.createElement('option');
    option.textContent = i;
    daySelect.appendChild(option);
  }

  // 前回の日が既に設定されていたら、 daySelect の値を
  // 日に設定し、年を変えたときに1に戻ることを避ける
  if(previousDay) {
    daySelect.value = previousDay;

    // 前回設定されていた日が大きい数字、つまり31であった場合、
    // そして日数が少ない月 (例えば2月) を選択した場合、
    // コードのこの部分で空欄を表示するのではなく、一番大きな日が
    // 選択されるようにする
    if(daySelect.value === "") {
      daySelect.value = previousDay - 1;
    }

    if(daySelect.value === "") {
      daySelect.value = previousDay - 2;
    }

    if(daySelect.value === "") {
      daySelect.value = previousDay - 3;
    }
  }
}

function populateYears() {
  // 今年を数字として取得
  var date = new Date();
  var year = date.getFullYear();

  // 今年から100年前までの年が &lt;select&gt; で選択できるようにする
  for(var i = 0; i &lt;= 100; i++) {
    var option = document.createElement('option');
    option.textContent = year-i;
    yearSelect.appendChild(option);
  }
}

function populateHours() {
  // populate the hours &lt;select&gt; with the 24 hours of the day
  for(var i = 0; i &lt;= 23; i++) {
    var option = document.createElement('option');
    option.textContent = (i &lt; 10) ? ("0" + i) : i;
    hourSelect.appendChild(option);
  }
}

function populateMinutes() {
  // populate the minutes &lt;select&gt; with the 60 hours of each minute
  for(var i = 0; i &lt;= 59; i++) {
    var option = document.createElement('option');
    option.textContent = (i &lt; 10) ? ("0" + i) : i;
    minuteSelect.appendChild(option);
  }
}

// 年や月の &lt;select&gt; 値が変更されたら、 populateDays() を
// 再実行して日数を調整する
yearSelect.onchange = function() {
  populateDays(monthSelect.value);
}

monthSelect.onchange = function() {
  populateDays(monthSelect.value);
}

//日数を保存
var previousDay;

// 以前どの日が設定されていたかを保存する
// 使い方は populateDays() を参照
daySelect.onchange = function() {
  previousDay = daySelect.value;
}</pre>

<div class="note">
<p><strong>注</strong>: 53週ある年もあることを忘れないでください (<a href="https://en.wikipedia.org/wiki/ISO_week_date#Weeks_per_year">年あたりの週数</a>を参照)。商品のアプリを開発するときはこれを念頭に置いておく必要があります。</p>
</div>

<h2 id="Specifications" name="Specifications">仕様書</h2>

<table class="standard-table">
 <thead>
  <tr>
   <th scope="col">仕様書</th>
   <th scope="col">状態</th>
   <th scope="col">備考</th>
  </tr>
 </thead>
 <tbody>
  <tr>
   <td>{{SpecName('HTML WHATWG', 'forms.html#local-date-and-time-state-(type=datetime-local)', '&lt;input type="datetime-local"&gt;')}}</td>
   <td>{{Spec2('HTML WHATWG')}}</td>
   <td></td>
  </tr>
  <tr>
   <td>{{SpecName('HTML5 W3C', 'forms.html#local-date-and-time-state-(type=datetime-local)', '&lt;input type="datetime-local"&gt;')}}</td>
   <td>{{Spec2('HTML5 W3C')}}</td>
   <td></td>
  </tr>
 </tbody>
</table>

<h2 id="Browser_compatibility" name="Browser_compatibility">ブラウザーの互換性</h2>

<p>{{Compat("html.elements.input.input-datetime-local")}}</p>

<h2 id="See_also" name="See_also">関連情報</h2>

<ul>
 <li>全般的な {{HTMLElement("input")}} およびその操作に使用する{{domxref("HTMLInputElement")}} インターフェイス</li>
 <li><code><a href="/ja/docs/Web/HTML/Element/input/date">&lt;input type="date"&gt;</a></code> および <code><a href="/ja/docs/Web/HTML/Element/input/time">&lt;input type="time"&gt;</a></code></li>
 <li><a href="/ja/docs/Web/HTML/Date_and_time_formats">HTML で使われる日付や時刻の形式</a></li>
 <li><a href="/ja/docs/Web/Guide/HTML/Forms/The_native_form_widgets#Date_and_time_picker">日付と時刻の選択のチュートリアル</a></li>
 <li><a href="/ja/docs/Learn/HTML/Forms/Property_compatibility_table_for_form_widgets">Compatibility of CSS properties</a></li>
</ul>
